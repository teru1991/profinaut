# MD-DESC-B-005

- Task: Descriptor Engine 統合（実行エンジンAPI化）+ E2Eテスト + DoD/Docs
- Scope: marketdata-descriptor-engine-integration
- Required Locks: `LOCK:services-marketdata`

## Completed

- `execute_descriptor(template, ctx)` を追加し、`ExecResult(output, metrics)` / `ExecError(error_code, message, details)` を返す統合APIを実装。
- `metrics` に `steps`, `output_bytes`, `loops`, `emits` を実装。
- E2E を追加し、正常系（foreach + if + placeholder + json pointer）を固定化。
- 異常系（loop limit / output limit / unknown placeholder / invalid pointer）を固定化。
- 1MB 出力 cap の境界値（ちょうど 1,000,000 byte は通過、+1 byte は失敗）を追加。

## DoD check

- `error_code` は `ExecError.error_code` として機械可読。
- `steps/output/loop` の上限制限をテストで有効化。
- 既存 API は維持し、追加実装（additive）のみ。
