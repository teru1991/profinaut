# UG-P0-112 — Backtest-First最小実装

## 実装内容
- `dataset_ref` を必須入力にした最小バックテストランナーを追加。
- ランナーは前方向にのみ反復し、各ステップで `history = prices[:idx]` を参照する構造で look-ahead を防止。
- 実行結果を deterministic に artifact として保存。

## 実行方法
```bash
python -m worker.backtest --dataset-ref <id> --out worker/artifacts/<id>/
```

## 出力アーティファクト
- `worker/artifacts/<dataset_ref>/result.json`
- `worker/artifacts/<dataset_ref>/summary.json`

どちらも `sort_keys=True` で JSON 保存し、同一入力で同一バイト列になるようにしています。

## テスト（determinism）
`tests/replay/test_backtest_runner.py` で次を検証:
- 同一 `dataset_ref` を2回実行したとき `result.json` / `summary.json` が byte-for-byte で一致
- 未来データを変更しても、変更時点より前のトレード結果は不変（look-ahead防止）
- `dataset_ref` 空文字を拒否
- `summary.json` のスキーマ順序を固定
