# UG-P0-105 â€” Chaos Injection Tests (429 / 5xx / timeout / WS drop)

## Task metadata
- Task ID: UG-P0-105
- Scope: qa-chaos-injection
- Depends-on: none

## Added coverage
The `tests/chaos` suite introduces self-contained fault injection scenarios:

1. **HTTP 429** with `Retry-After` header assertion.
2. **HTTP 503** with status/body assertion.
3. **Timeout** where the server intentionally delays response beyond client timeout.
4. **WebSocket drop** where the server abruptly closes the connection and the client asserts `ConnectionClosed`.

## WS drop behavior
- If the `websockets` dependency is unavailable in the runtime, the WS drop test is **skipped** with a clear message.
- If available, the test runs as part of `python -m pytest -q tests/chaos`.

## Local verification
```bash
python -m pip install -e ".[dev]"
python -m pytest -q tests/chaos
```

## CI workflow
A dedicated GitHub Actions workflow (`.github/workflows/chaos-injection.yml`) now runs this suite using Python 3.11 and `pip install -e ".[dev]"`.
